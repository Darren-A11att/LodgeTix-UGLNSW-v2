# Event Confirmation Page (`/app/events/[id]/confirmation/page.tsx`)

## Page Type: Server Component (Dynamic Rendering)

This page is implemented as a Next.js server component that dynamically fetches data at request time. Like the tickets page, it does not implement `generateStaticParams()`, so pages are generated on-demand.

## Implementation Details

The page fetches event data server-side and generates mock order data:

```typescript
export default async function ConfirmationPage({ params }: { params: Promise<{ id: string }> }) {
  const { id } = await params
  
  // Fetch event from facade
  const event = await getEventById(id)
  
  if (!event) {
    notFound()
  }
  
  // Get order details (mock data for now)
  const orderDetails = getOrderDetails(id)
  
  // Rest of the component...
}
```

## Data Source

### Event Data
Fetched via `getEventById(id)` which can retrieve from:

1. **Dynamic from Supabase**: When `USE_EVENTS_SCHEMA=true`, data comes from the Events table
2. **Hard-coded Mock Data**: When `USE_EVENTS_SCHEMA=false`, data comes from the mock events in `event-utils.ts`

### Order Data
The order details are currently **hard-coded mock data** generated by the `getOrderDetails()` function:

```typescript
// Generate mock order data (would normally come from a database)
const getOrderDetails = (eventId: string) => {
  return {
    tickets: [{ id: "2", name: "Standard Access", price: 75, quantity: 1 }],
    confirmationNumber: `EVENT-${new Date().getFullYear()}-${Math.floor(Math.random() * 100000)}`,
    purchaseDate: new Date().toLocaleDateString('en-US', { 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric' 
    }),
  }
}
```

This function is intended to be replaced with real database queries in the future.

## Variables and Constants

### Dynamic from Supabase (when enabled)

Event data from Supabase:
- `event.id` - UUID from database
- `event.slug` - URL-friendly identifier
- `event.title` - Event title
- `event.date` - Formatted date string
- `event.time` - Formatted time string
- `event.location` - Event location

### Mock Order Data (Hard-coded)

All order data is currently hard-coded:
- `orderDetails.confirmationNumber` - Randomly generated confirmation number
- `orderDetails.purchaseDate` - Current date formatted as string
- `orderDetails.tickets` - Mock array of purchased tickets:
  - Fixed ticket ID ("2")
  - Fixed ticket name ("Standard Access")
  - Fixed price (75)
  - Fixed quantity (1)

## Hard-coded UI Elements

The page contains several non-dynamic UI elements:
1. "What's Next?" section with three fixed cards:
   - "Add to Calendar" (non-functional)
   - "Invite a Brother" (non-functional)
   - "Find Accommodation" (non-functional)
2. "Download Tickets" button (non-functional)

## Rendering Pattern

The page follows this pattern:
1. Dynamically fetches event data at request time
2. Generates mock order data
3. Calculates the total price from the mock ticket data
4. Renders a success confirmation with order details
5. Shows the event information and ticket summary
6. Presents next steps and download options